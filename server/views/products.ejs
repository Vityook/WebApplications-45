<%- include('partials/header', {title: 'Products'}); %>

<main class="container">
    <h1>Our Products</h1>

    <div class="product-grid">
        <% if (products && products.length > 0) { %>
            <% products.forEach(product => { %>
                <div class="product-card">
                    <h3><%= product.name %></h3>
                    <p class="price">$<%= product.price.toFixed(2) %></p>
                    <p><%= product.description %></p>
                    <p>Category: <%= product.category %></p>
                    <p><%= product.inStock ? 'In Stock' : 'Out of Stock' %></p>
                    <a href="/products/<%= product._id %>" class="btn btn-secondary">View Details</a>
                    <button class="btn btn-primary add-to-cart" data-id="<%= product._id %>">Add to Cart</button>
                </div>
            <% }); %>
        <% } else { %>
            <p>No products found.</p>
        <% } %>
    </div>

    <div class="pagination">
        <% if (currentPage > 1) { %>
            <a href="/products?page=<%= currentPage - 1 %>" class="btn btn-secondary">Previous</a>
        <% } %>
        <span>Page <%= currentPage %> of <%= totalPages %></span>
        <% if (currentPage < totalPages) { %>
            <a href="/products?page=<%= currentPage + 1 %>" class="btn btn-secondary">Next</a>
        <% } %>
    </div>
</main>

<%- include('partials/footer'); %>